<!-- reservas.html -->
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Reservar Mesa ‚Ä¢ NAKAO</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
  :root {
    --red: #e63946;
    --gold: #ffd700;
    --black: #090909;
    --dark: #121212;
    --white: #f8f9fa;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    background: var(--black);
    color: var(--white);
    font-family: 'Poppins', sans-serif;
    padding: 2rem 5%;
  }
  .container {
    max-width: 700px;
    margin: 3rem auto;
    background: var(--dark);
    padding: 2.5rem;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    border: 1px solid rgba(255,255,255,0.05);
  }
  h1 {
    font-family: 'Orbitron', sans-serif;
    text-align: center;
    margin-bottom: 2rem;
    background: linear-gradient(45deg, var(--gold), var(--red));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    font-size: 2.4rem;
  }
  .form-group {
    margin-bottom: 1.5rem;
  }
  label {
    display: block;
    margin-bottom: 0.5rem;
    color: var(--gold);
    font-weight: 500;
  }
  input, select, textarea {
    width: 100%;
    padding: 0.9rem;
    background: rgba(30,30,30,0.7);
    border: 1px solid #444;
    color: var(--white);
    border-radius: 10px;
    font-family: 'Poppins', sans-serif;
    transition: all 0.3s;
  }
  input:focus, select:focus, textarea:focus {
    outline: none;
    border-color: var(--gold);
    box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.2);
  }
  input.valid { border-color: #4ade80; box-shadow: 0 0 0 3px rgba(74, 222, 128, 0.2); }
  input.invalid { border-color: var(--red); box-shadow: 0 0 0 3px rgba(230, 57, 70, 0.2); }
  button {
    background: linear-gradient(45deg, var(--red), var(--gold));
    color: #000;
    border: none;
    padding: 1.1rem 2rem;
    font-weight: 600;
    border-radius: 10px;
    cursor: pointer;
    width: 100%;
    font-size: 1.1rem;
    letter-spacing: 1px;
    transition: all 0.3s;
  }
  button:hover {
    transform: scale(1.02);
    box-shadow: 0 0 20px rgba(230, 57, 70, 0.6);
  }
  .feedback {
    text-align: center;
    margin-top: 1.2rem;
    min-height: 1.8rem;
    font-weight: 600;
    padding: 0.5rem;
    border-radius: 8px;
  }
  .success { 
    background: rgba(74, 222, 128, 0.15); 
    color: #4ade80; 
    border: 1px solid rgba(74, 222, 128, 0.3);
  }
  .error { 
    background: rgba(230, 57, 70, 0.15); 
    color: var(--red); 
    border: 1px solid rgba(230, 57, 70, 0.3);
  }
</style>
</head>
<body>
  <div class="container">
    <h1>RESERVAR MESA</h1>
    <form id="reservaForm">
      <div class="form-group">
        <label for="nombre">Nombre completo</label>
        <input type="text" id="nombre" required>
      </div>
      <div class="form-group">
        <label for="fecha">Fecha</label>
        <input type="date" id="fecha" required>
      </div>
      <div class="form-group">
        <label for="hora">Hora</label>
        <input type="time" id="hora" required min="08:00" max="22:00">
      </div>
      <div class="form-group">
        <label for="personas">N√∫mero de personas</label>
        <select id="personas" required>
          <option value="">Selecciona...</option>
          <option value="1">1 persona</option>
          <option value="2">2 personas</option>
          <option value="3">3 personas</option>
          <option value="4">4 personas</option>
          <option value="5+">5 o m√°s</option>
        </select>
      </div>
      <div class="form-group">
        <label for="notas">Notas (opcional)</label>
        <textarea id="notas" rows="3" placeholder="Ej: Mesa cerca de la ventana, celebraci√≥n..."></textarea>
      </div>
      <button type="submit">Confirmar Reserva ‚ú®</button>
      <div class="feedback" id="feedback"></div>
    </form>
  </div>

  <script>
  // Validaci√≥n en tiempo real
  document.getElementById('nombre').addEventListener('input', function() {
    this.className = this.value.length > 2 ? 'valid' : 'invalid';
  });

  document.getElementById('fecha').addEventListener('input', function() {
    const today = new Date().toISOString().split('T')[0];
    this.className = this.value >= today ? 'valid' : 'invalid';
  });

  document.getElementById('hora').addEventListener('input', function() {
    this.className = this.value ? 'valid' : 'invalid';
  });

  document.getElementById('personas').addEventListener('change', function() {
    this.className = this.value ? 'valid' : 'invalid';
  });

  // Enviar formulario
  document.getElementById('reservaForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const feedback = document.getElementById('feedback');
    feedback.textContent = 'Enviando...';
    feedback.className = 'feedback';

    const data = {
      nombre: document.getElementById('nombre').value,
      fecha: document.getElementById('fecha').value,
      hora: document.getElementById('hora').value,
      personas: document.getElementById('personas').value,
      notas: document.getElementById('notas').value
    };

    try {
      const res = await fetch('guardar_reserva.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });
      const result = await res.json();
      if (result.success) {
        feedback.textContent = '‚úÖ ¬°Reserva confirmada! Gracias, ' + data.nombre + ' üí´';
        feedback.className = 'feedback success';
        document.getElementById('reservaForm').reset();
        // Reset clases
        document.querySelectorAll('input, select').forEach(el => el.className = '');
      } else {
        feedback.textContent = '‚ùå Error: ' + (result.message || 'No se pudo guardar');
        feedback.className = 'feedback error';
      }
    } catch (err) {
      feedback.textContent = '‚ö†Ô∏è Error de conexi√≥n. Intenta de nuevo.';
      feedback.className = 'feedback error';
    }
  });

  // Fecha m√≠nima hoy
  document.getElementById('fecha').min = new Date().toISOString().split('T')[0];
  document.getElementById('nombre').focus();
</script>
</body>
</html>